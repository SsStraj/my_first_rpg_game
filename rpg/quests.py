import random

INTRO_STORY = 'Крестьянин, по имени Санчо, рассказывает вам о своей деревне, которая страдает от нашествия ' \
              'грабителей. Он говорит, что они крадут скот, опустошают поле и запугивают местных жителей. Деревня ' \
              'уже несколько месяцев живет в страхе, и никто не может справиться с этими преступниками. Санчо ' \
              'обращается к вам с просьбой помочь деревне в борьбе с грабителями и восстановить мир и порядок. '


# Функция для обработки ввода игрока
def handle_input(prompt, valid_options):
    while True:
        user_input = input(prompt).lower()
        if user_input in valid_options:
            return user_input
        else:
            print("Некорректный ввод. Попробуйте еще раз.")


# Функция для генерации случайного события или испытания
def generate_event():
    events = ["глубокие реки", "труднопроходимые тропы", "злобные волки"]
    return random.choice(events)


# Функция для выполнения задания крестьян
def perform_task():
    tasks = ["соберите редкие травы", "спасите похищенного зверя", "принесите лекарство"]
    task = random.choice(tasks)
    print(f"Выполните задание: {task}")


# Функция для принятия\отказа от квеста
def start_quest():
    print('Вы встретили крестьянина который просит о помощи')
    answer_question = input('Выслушать его?(ответьте да или нет): ')
    if answer_question == 'Да' or answer_question == 'да':
        print(INTRO_STORY)
        # Начало квеста
        print("У вас есть миссия помочь деревне в борьбе с грабителями и восстановить мир и порядок.")

        print("Вы отправляетесь вместе с крестьянином Санчо в деревню.")
        # Подготовка к путешествию
        print("Вы узнали, что грабители обитают в заброшенной крепости на окраине деревни.")

        print("Санчо предлагает пройти через лес, чтобы подойти к крепости с другой стороны.")

        # Путешествие по лесу
        while True:
            event = generate_event()
            print(f"Вы столкнулись с препятствием: {event}")
            action = handle_input("Какое действие вы выберете? [идти/взять другой путь]: ",
                                  ["идти", "взять другой путь"])
            if action == "идти":
                print("Вы продолжаете путь.")
            else:
                print("Вы ищете другой путь.")

            # Встреча с крестьянами и выполнение задания
            if random.random() < 0.3:
                print("Вы встречаете лесных жителей.")
                perform_task()

            # Достижение крепости
            if random.random() < 0.2:
                print("Вы наконец приближаетесь к крепости.")
                break

        # Испытание в крепости
        print("Вы готовитесь к испытанию в крепости.")
        # Здесь вы можете добавить дополнительный код для самого финального испытания или события в крепости
        print("Квест завершен. Спасибо за игру!")

    elif answer_question == 'Нет' or answer_question == 'нет':
        print('Вы отпихнули надоедливого крестьянина и пошли двльше своей дорогой.')
    else:
        print('Введите да - или нет')
        start_quest()


start_quest()
